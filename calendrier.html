<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Manifest PWA -->
<link rel="manifest" href="manifest.json">

<!-- Couleur du th√®me (barre d'adresse sur mobile) -->
<meta name="theme-color" content="#009900">

<!-- Apple Touch Icons pour iOS -->
<link rel="apple-touch-icon" href="images/icon-152x152.png">
<link rel="apple-touch-icon" sizes="72x72" href="images/icon-72x72.png">
<link rel="apple-touch-icon" sizes="96x96" href="images/icon-96x96.png">
<link rel="apple-touch-icon" sizes="128x128" href="images/icon-128x128.png">
<link rel="apple-touch-icon" sizes="144x144" href="images/icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="images/icon-152x152.png">
<link rel="apple-touch-icon" sizes="192x192" href="images/icon-192x192.png">
<link rel="apple-touch-icon" sizes="384x384" href="images/icon-384x384.png">
<link rel="apple-touch-icon" sizes="512x512" href="images/icon-512x512.png">

<!-- Configuration iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="KOP SUD ASSE">

<!-- Configuration Windows -->
<meta name="msapplication-TileImage" content="images/icon-144x144.png">
<meta name="msapplication-TileColor" content="#009900">

<!-- Description pour SEO et partage -->
<meta name="description" content="Application officielle du Kop Sud de l'AS Saint-√âtienne - Green Angels 92. Suivez les matchs, les chants et rejoignez la communaut√© des supporters st√©phanois !">
    <title>KOP SUD ASSE - Matchs & Calendrier</title>
    <link rel="stylesheet" href="css/style.css">
    </head>
<body>

    <header>
        <nav id="main-nav">
            <a href="index.html" class="nav-logo">KOP SUD | Green Angels 92</a>
            <ul>
                <li><a href="index.html" class="nav-button">Accueil</a></li>
                <li><a href="photos.html" class="nav-button">Vos Photos</a></li>
                <li><a href="chant.html" class="nav-button">Chants</a></li>
                <li><a href="calendrier.html" class="nav-button">Matchs & Compte √† Rebours</a></li>
                <li><a href="m√©t√©o.html" class="nav-button">M√©t√©o du Chaudron</a></li>
            </ul>
        </nav>
    </header> 

    <main class="page-content">
        <h1 class="page-title" style="text-align: center;">Prochain Rendez-vous au Chaudron</h1>
        
        <div id="compte-a-rebours">
            Chargement du compte √† rebours...
        </div>

        <section class="match-list-section">
            <h2>Mon Calendrier de Supporter</h2>
            <p>Liste des matchs o√π j'irai en Kop Sud (Tribune Jean Snella) :</p>

            <table class="match-table">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Adversaire</th>
                        <th>Comp√©tition</th>
                        <th>Place</th>
                        <th>Score</th>
                        <th>R√©sultat</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Sam. 22 Nov.</td>
                        <td>Nancy</td>
                        <td>Ligue 2</td>
                        <td>Kop Sud (Snella)</td>
                    <td>
                        <img src="images/ASSE.png" alt="Logo ASSE" style="width:20px;"> 
                        <strong>N.A</strong> 
                        <img src="images/nancy.png" alt="Logo Nancy" style="width:20px;">
                    </td>
                        <td>A D√©terminer</td> 
                    </tr>
                    <tr>
                        <td>Sam. 18 Oct.</td>
                        <td>Le Mans</td>
                        <td>Ligue 2</td>
                        <td>Kop Sud (Snella)</td>
                    <td>
                        <img src="images/ASSE.png" alt="Logo ASSE" style="width:20px;"> 
                        <strong>2 - 3</strong> 
                        <img src="images/mans.png" alt="Logo Le Mans" style="width:20px;">
                    </td>
                        <td>D√©faite</td> 
                    </tr>
                    <tr>
                        <td>Sam. 20 Sept.</td>
                        <td>Reims</td>
                        <td>Ligue 2</td>
                        <td>Kop Sud (Snella)</td>
                    <td>
                        <img src="images/ASSE.png" alt="Logo ASSE" style="width:20px;"> 
                        <strong>3 - 2</strong> 
                        <img src="images/Reims.png" alt="Logo Reims" style="width:20px;">
                    </td>
                        <td>Victoire</td> 
                    </tr>
                </tbody>
            </table>
        </section>
    </main>
    
    <footer>
        <p>¬© 2025 Kop Sud ASSE - R√©alis√© par un fervent supporter. PARTIZANS D'UN JOUR, PARTIZANS POUR TOUJOURS !</p>
    </footer>

    <script src="js/script.js"></script>

    <script>
// ===== ENREGISTREMENT DU SERVICE WORKER =====
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/Kop_Sud/service-worker.js')
      .then((registration) => {
        console.log('‚úÖ Service Worker enregistr√© avec succ√®s:', registration.scope);
      })
      .catch((error) => {
        console.log('‚ùå √âchec de l\'enregistrement du Service Worker:', error);
      });
  });
}

// ===== BOUTON D'INSTALLATION PWA =====
let deferredPrompt;
const installButton = document.createElement('button');
installButton.id = 'installPWA';
installButton.innerHTML = 'üì± Installer l\'app KOP SUD';
installButton.style.cssText = `
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: linear-gradient(135deg, #009900 0%, #006600 100%);
  color: white;
  border: none;
  padding: 15px 25px;
  border-radius: 50px;
  font-weight: bold;
  font-size: 1em;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(0, 153, 0, 0.4);
  z-index: 9999;
  display: none;
  transition: all 0.3s ease;
  font-family: Arial, sans-serif;
`;

// Effet hover
installButton.addEventListener('mouseenter', () => {
  installButton.style.transform = 'translateY(-3px)';
  installButton.style.boxShadow = '0 6px 20px rgba(0, 153, 0, 0.5)';
});

installButton.addEventListener('mouseleave', () => {
  installButton.style.transform = 'translateY(0)';
  installButton.style.boxShadow = '0 4px 15px rgba(0, 153, 0, 0.4)';
});

document.body.appendChild(installButton);

// √âv√©nement beforeinstallprompt
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  installButton.style.display = 'block';
  console.log('üí° Bouton d\'installation PWA affich√©');
});

// Clic sur le bouton d'installation
installButton.addEventListener('click', async () => {
  if (!deferredPrompt) {
    console.log('‚ùå Aucune demande d\'installation en attente');
    return;
  }
  
  deferredPrompt.prompt();
  const { outcome } = await deferredPrompt.userChoice;
  
  if (outcome === 'accepted') {
    console.log('‚úÖ L\'utilisateur a accept√© l\'installation');
  } else {
    console.log('‚ùå L\'utilisateur a refus√© l\'installation');
  }
  
  deferredPrompt = null;
  installButton.style.display = 'none';
});

// √âv√©nement appinstalled
window.addEventListener('appinstalled', () => {
  console.log('üéâ PWA install√©e avec succ√®s !');
  installButton.style.display = 'none';
  deferredPrompt = null;
  alert('üéâ Application KOP SUD ASSE install√©e avec succ√®s !\n\nVous pouvez maintenant y acc√©der depuis votre √©cran d\'accueil.');
});

// D√©tecter si l'app est d√©j√† install√©e
if (window.matchMedia('(display-mode: standalone)').matches) {
  console.log('‚úÖ Application en mode standalone (d√©j√† install√©e)');
  installButton.style.display = 'none';
}
</script>

</body>
</html>